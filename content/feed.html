---
title: "Activity Feed"
type: "nofmt"
menu: "main"
weight: 400
keywords: "activity feed"
---

<script type="module">
    import { Octokit } from "https://cdn.skypack.dev/@octokit/core";
    const octokit = new Octokit();

    // Fetch recent activity from GitHub
    window.pullFeed = async function pullFeed(){
        await octokit.request('GET /users/{username}/events/public', {
            username: 'Angus-C-git',
            page: 1,
            per_page: 30
        }).then(response => {
            console.log(response.data);
            let nonSelected = document.getElementById('twitter');
            nonSelected.classList.remove('feed-selected');
            nonSelected.classList.add('feed-non-selected');

            let selected = document.getElementById('github');
            selected.classList.remove('feed-non-selected');
            selected.classList.add('feed-selected');

            let feed = document.getElementById("feed");
            feed.innerHTML = '';
            document.getElementById('loader').innerHTML = " ";
            response.data.map(event => {
                let eventBody = null;
                switch (event.type) {
                    case "PushEvent":
                        eventBody = `{{< activity
                            date="${event.created_at.slice(0, 10).concat(` `).concat(event.created_at.slice(11, 16))}"
                            title="Pushed to ${event.repo.name}"
                            desc="${event.payload.commits[0].message}"
                            commit="${event.payload.commits[0].sha}"
                            repo="${event.repo.name}"
                        >}}`
                        break;
                    case "CreateEvent":
                        eventBody = `{{< activity
                            date="${event.created_at.slice(0, 10).concat(` `).concat(event.created_at.slice(11, 16))}"
                            title="Created ${event.repo.name}"
                            desc="${event.payload.description}"
                            created="true"
                        >}}`
                        break;
                    case "WatchEvent":
                        eventBody = `{{< activity
                            date="${event.created_at.slice(0, 10).concat(` `).concat(event.created_at.slice(11, 16))}"
                            title="Started Watching ${event.repo.name}"
                            link="${event.repo.name}"
                        >}}`
                        break;
                    default:
                        break;
                }
                if (eventBody)
                    feed.innerHTML += eventBody;
            });
        });
    }; pullFeed();
</script>

<hr />
<h1>
    <i id="github" class="fab fa-github-square feed-selected" onclick="pullFeed()"></i>
    <i id="twitter" class="fab fa-twitter-square feed-non-selected" onclick="twitterFeed()"></i>
</h1>

<ul id="feed" class="activity-timeline"></ul>

<span id="loader"><i class="fas fa-spinner"></i> Loading ...</span>


